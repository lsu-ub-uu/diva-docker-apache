<SPConfig xmlns="urn:mace:shibboleth:3.0:native:sp:config"
          xmlns:conf="urn:mace:shibboleth:3.0:native:sp:config"
          xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
          xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
          xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata"
          clockSkew="180">

  <ApplicationDefaults id="default"
	               entityID="{SHIBBOLETH_ENTITY_ID}"
	               REMOTE_USER="subject-id eppn pairwise-id persistent-id"
	               cipherSuites="DEFAULT:!EXP:!LOW:!aNULL:!eNULL:!DES:!IDEA:!SEED:!RC4:!3DES:!kRSA:!SSLv2:!SSLv3:!TLSv1:!TLSv1.1"
                       metadataAttributePrefix="Meta-">
    <Sessions lifetime="28800" timeout="3600" relayState="ss:mem"
              redirectLimit="exact"
	      checkAddress="false" handlerSSL="true" cookieProps="https" sameSiteFallback="true">

      <Logout>SAML2 Local</Logout>
      <NameIDMgmt>SAML2</NameIDMgmt>

	<!-- Uppsala Universitet Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/uu" id="uu"
                        relayState="cookie" entityID="https://weblogin.uu.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- LU Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/lu" id="lu"
                        relayState="cookie" entityID="https://shibboleth.net.lu.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- LNU Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/lnu" id="lnu"
                        relayState="cookie" entityID="https://idp.lnu.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- SU NEW Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/su" id="su"
                        relayState="cookie" entityID="https://idp.it.su.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- KAU NEW Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/kau" id="kau"
                        relayState="cookie" entityID="https://weblogin.kau.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- MIUN Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/miun" id="miun"
                        relayState="cookie" entityID="https://miunidp.miun.se/idp/shibbolet">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- UMU Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/umu" id="umu"
                        relayState="cookie" entityID="http://adfs.umu.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- KTH Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/kth" id="kth"
                        relayState="cookie" entityID="https://saml.sys.kth.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- Konstfack Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/konstfack" id="konstfack"
                        relayState="cookie" entityID="https://idp-v2.konstfack.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- HH Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/hh" id="hh"
                        relayState="cookie" entityID="https://idp.hh.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- HIG Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/hig" id="hig"
                        relayState="cookie" entityID="https://idp3.hig.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- MAU Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/mau" id="mau"
                        relayState="cookie" entityID="https://idp.mah.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- MDH Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/mdh" id="mdh"
                        relayState="cookie" entityID="https://idp.mdh.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- HIS Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/his" id="his"
                        relayState="cookie" entityID="https://idp.his.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- LIU Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/liu" id="liu"
                        relayState="cookie" entityID="http://fs.liu.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- DU Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/du" id="du"
                        relayState="cookie" entityID="https://login.du.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- FHS Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/fhs" id="fhs"
                        relayState="cookie" entityID="http://login2.fhs.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- KMH Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/kmh" id="kmh"
                        relayState="cookie" entityID="https://idp.kmh.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- Högskolan Väst Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/hv" id="hv"
                        relayState="cookie" entityID="http://adfs.hv.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- Röda Korsets Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/rkh" id="rkh"
                        relayState="cookie" entityID="http://adfs.rkh.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- Göteborg Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/gu" id="gu"
                        relayState="cookie" entityID="https://idp.it.gu.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- Gymnastik- och idrottshögskolan Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/gih" id="gih"
                        relayState="cookie" entityID="https://idp01.gih.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- Högskolan i Borås Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/hb" id="hb"
                        relayState="cookie" entityID="https://idp.hb.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- Blekinge Tekniska Högskola Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/bth" id="bth"
                        relayState="cookie" entityID="http://fs.bth.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- KKH Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/kkh" id="kkh"
                        relayState="cookie" entityID="https://idp2.kkh.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- uniarts Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/uniarts" id="uniarts"
                        relayState="cookie" entityID="https://idp.uniarts.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- LTU Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/ltu" id="ltu"
                        relayState="cookie" entityID="https://idp.ltu.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- SH Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/sh" id="sh"
                        relayState="cookie" entityID="https://idp-v2.suni.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- ORU Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/oru" id="oru"
	      relayState="cookie" entityID="https://shib-idp-1.oru.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- RISE Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/ri" id="ri"
                        relayState="cookie" entityID="http://adfs.sp.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- SMHI Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/smhi" id="smhi"
                        relayState="cookie" entityID="https://weblogin.smhi.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- havochvatten Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/havochvatten" id="havochvatten"
                        relayState="cookie" entityID="https://login.havochvatten.se/nidp/saml2/metadata">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- esh Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/esh" id="esh"
                        relayState="cookie" entityID="https://idp.esh.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- ths Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/ths" id="ths"
                        relayState="cookie" entityID="https://idp.ths.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- sprakochfolkminnen Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/sprakochfolkminnen" id="sprakochfolkminnen"
                        relayState="cookie" entityID="https://weblogin.uu.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- nai Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/nai" id="nai"
                        relayState="cookie" entityID="https://weblogin.uu.se/idp/shibboleth">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- hj Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/hj" id="hj"
                        relayState="cookie" entityID="http://adfs.ju.se/adfs/services/trust">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>

	<!-- VTI Session Initiator -->
      <SessionInitiator type="Chaining" Location="/Login/vti" id="vti"
                        relayState="cookie" entityID="https://sts.windows.net/44f52952-2a66-4958-80d4-da9db72ad662/">
        <SessionInitiator type="SAML2" template="bindingTemplate.html"/>
      </SessionInitiator>


      <md:AssertionConsumerService Location="/SAML2/POST" index="1"
		                   Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"
                                   conf:ignoreNoPassive="true"/>

      <Handler type="MetadataGenerator" Location="/Metadata" signing="false"/>
      <Handler type="Status" Location="/Status" acl="127.0.0.1 ::1"/>

      <Handler type="Session" Location="/Session" showAttributeValues="false"/>

      <Handler type="DiscoveryFeed" Location="/DiscoFeed"/>
    </Sessions>

    <Errors session="/shibboleth-sp/sessionError.html"
            metadata="/shibboleth-sp/metadataError.html"
            access="/shibboleth-sp/accessError.html"
            ssl="/shibboleth-sp/sslError.html"
            localLogout="/shibboleth-sp/localLogout.html"
            globalLogout="/shibboleth-sp/globalLogout.html"
            supportContact="diva-support@ub.uu.se"
            logoLocation="/shibboleth-sp/logo.jpg"
            styleSheet="/shibboleth-sp/main.css"/>

    <MetadataProvider type="MDQ" id="mdq.swamid.se" ignoreTransport="true" cacheDirectory="mdq.swamid.se"
                      baseUrl="https://mds.swamid.se/">
      <MetadataFilter type="Signature" certificate="credentials/md-signer2.crt"/>
      <MetadataFilter type="RequireValidUntil" maxValidityInterval="2419200"/>
    </MetadataProvider>


    <AttributeExtractor type="XML" validate="true" reloadChanges="false" path="attribute-map.xml"/>

    <!-- more attributes please check https://shibboleth.atlassian.net/wiki/spaces/SP3/pages/2065334447/MetadataAttributeExtractor -->

    <AttributeResolver type="Query" subjectMatch="true"/>

    <AttributeFilter type="XML" validate="true" path="attribute-policy.xml"/>

    <CredentialResolver type="File" use="signing"
                        key="credentials/sign-key.pem" certificate="credentials/sign-cert.pem"/>
    <CredentialResolver type="File" use="encryption"
                        key="credentials/enc-key.pem" certificate="credentials/enc-cert.pem"/>

  </ApplicationDefaults>

  <SecurityPolicyProvider type="XML" validate="true" path="security-policy.xml"/>

  <ProtocolProvider type="XML" validate="true" reloadChanges="false" path="protocols.xml"/>
</SPConfig>
